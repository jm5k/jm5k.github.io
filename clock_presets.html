<!DOCTYPE html>
<html lang="en" data-theme="technolust">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="color-scheme" content="dark light" />
<meta name="theme-color" content="#000000" />
<link rel="stylesheet" href="lcl.css" />
<title>24-Hour Linear Clock | Preset Themes</title>

<!-- üîç SEO -->
<meta name="description" content="Explore preset themes for the 24-Hour Linear Clock by jm5k ‚Äî switch between neon, classic, or custom color palettes with live updates, gradient rails, glow controls, and export/import options.">
<meta name="keywords" content="linear clock, theme presets, neon clock, minimalist clock, jm5k, linearclocklab, custom clock themes, 24-hour clock">
<meta name="author" content="jm5k">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://linearclocklab.com/clock_presets.html">

<!-- üîó Social / Open Graph -->
<meta property="og:type" content="website">
<meta property="og:title" content="Preset Themes | Linear Clock Lab">
<meta property="og:description" content="Switch between neon and classic themes or design your own with the 24-Hour Linear Clock preset system.">
<meta property="og:url" content="https://linearclocklab.com/clock_presets.html">
<meta property="og:image" content="https://linearclocklab.com/profile.png">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Preset Themes | Linear Clock Lab">
<meta name="twitter:description" content="Customize your Linear Clock experience with built-in and user-defined theme presets.">
<meta name="twitter:image" content="https://linearclocklab.com/profile.png">

<!-- üîñ Favicon / Icons -->
<link rel="icon" href="https://linearclocklab.com/profile.png" type="image/png">
<link rel="apple-touch-icon" href="https://linearclocklab.com/profile.png">

<style>
  :root{
    --bg:#000; --fg:#bfc7d5; --muted:#7a8393;
    --accent:#00ffe6; --accent2:#ff2bd6; --accent3:#b4ff00;
    --tick:#1b1f28; --railA:#0b0f15; --railB:#121826; --marker:#00ffe6;
    --line-thin:1px; --glow:0.65;
  }

  /* Presets */
  html[data-theme="technolust"]{ --bg:#000; --fg:#bfc7d5; --muted:#7a8393; --accent:#00ffe6; --accent2:#ff2bd6; --accent3:#b4ff00; --tick:#1b1f28; --railA:#0b0f15; --railB:#121826; --marker:#00ffe6; }
  html[data-theme="midnight"]{ --bg:#060a12; --fg:#c6d8ff; --muted:#8ea0c6; --accent:#64a8ff; --accent2:#b987ff; --accent3:#66ffcc; --tick:#0e1a2b; --railA:#0a1220; --railB:#0d1730; --marker:#64a8ff; }
  html[data-theme="vaporwave"]{ --bg:#0b0014; --fg:#ffe6ff; --muted:#e6b8ff; --accent:#00ffd1; --accent2:#ff5ec9; --accent3:#ffd166; --tick:#250035; --railA:#150022; --railB:#220033; --marker:#ff5ec9; }
  html[data-theme="terminal"]{ --bg:#000; --fg:#b7ffb7; --muted:#6ddc6d; --accent:#00ff88; --accent2:#00ffa5; --accent3:#7bff00; --tick:#003300; --railA:#001600; --railB:#002100; --marker:#00ff88; }
  html[data-theme="amber"]{ --bg:#0a0600; --fg:#ffd7a1; --muted:#e0ab63; --accent:#ffb000; --accent2:#ff7a00; --accent3:#ffe066; --tick:#3a2500; --railA:#120a00; --railB:#1c0f00; --marker:#ffb000; }
  html[data-theme="mono"]{ --bg:#000; --fg:#dcdcdc; --muted:#9c9c9c; --accent:#ffffff; --accent2:#c0c0c0; --accent3:#a0a0a0; --tick:#2a2a2a; --railA:#0c0c0c; --railB:#121212; --marker:#ffffff; }
  html[data-theme="solar"]{ --bg:#002b36; --fg:#eee8d5; --muted:#93a1a1; --accent:#2aa198; --accent2:#b58900; --accent3:#cb4b16; --tick:#073642; --railA:#01303a; --railB:#023b47; --marker:#2aa198; }
  html[data-theme="cybercrimson"]{ --bg:#070000; --fg:#ffdddd; --muted:#b55; --accent:#ff0033; --accent2:#ff7700; --accent3:#ff2200; --tick:#250000; --railA:#100000; --railB:#1a0000; --marker:#ff0033; }
  html[data-theme="aurorapulse"]{ --bg:#01040a; --fg:#d6f7ff; --muted:#88a0b3; --accent:#00ffaa; --accent2:#a066ff; --accent3:#00e5ff; --tick:#08202a; --railA:#00151f; --railB:#091a27; --marker:#00ffaa; }
  html[data-theme="neonmist"]{ --bg:#0b0d10; --fg:#e0faff; --muted:#aab8c0; --accent:#9dfffa; --accent2:#f7a1ff; --accent3:#fff59e; --tick:#1c2329; --railA:#111417; --railB:#181b1f; --marker:#9dfffa; }
  html[data-theme="deepcircuit"]{ --bg:#01040a; --fg:#cde6ff; --muted:#7387a0; --accent:#00baff; --accent2:#d400ff; --accent3:#39ff9f; --tick:#0e1b2a; --railA:#05101a; --railB:#0a1825; --marker:#00baff; }
  html[data-theme="infravoid"]{ --bg:#050006; --fg:#ffdadf; --muted:#b86d7c; --accent:#ff0040; --accent2:#ff6a00; --accent3:#ff006e; --tick:#220010; --railA:#10000c; --railB:#1a0013; --marker:#ff0040; }
  html[data-theme="ghostline"]{ --bg:#000; --fg:#d0d0d0; --muted:#808080; --accent:#b0ffff; --accent2:#90a0ff; --accent3:#ffffff; --tick:#222; --railA:#0a0a0a; --railB:#111111; --marker:#b0ffff; }
  html[data-theme="ionstorm"]{ --bg:#00051a; --fg:#d4f8ff; --muted:#7ea1c4; --accent:#00f6ff; --accent2:#ffea00; --accent3:#0095ff; --tick:#07102a; --railA:#000b20; --railB:#03123a; --marker:#00f6ff; }
  html[data-theme="zenmint"]{ --bg:#0a1112; --fg:#e6f4f3; --muted:#99b1ae; --accent:#6ef7c9; --accent2:#60d2ff; --accent3:#91ffd8; --tick:#122021; --railA:#0e191a; --railB:#142223; --marker:#6ef7c9; }
  html[data-theme="voidlux"]{ --bg:#040011; --fg:#d9daff; --muted:#8a8fc9; --accent:#9966ff; --accent2:#00ccff; --accent3:#6a00ff; --tick:#12002a; --railA:#0a0018; --railB:#13002a; --marker:#9966ff; }

  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--fg);
    font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    display:flex; align-items:center; justify-content:center;
  }
  .wrap{ width:min(1000px, 92vw); padding:28px 20px 36px; }

  .top{ display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; margin-bottom:14px; }
  .brand a, .brand a:visited, .brand a:hover{ color:var(--accent); text-decoration:none; letter-spacing:.02em; }
  .brand small{ color:var(--muted); margin-left:10px; font-size:.9em; }

  .hairline{ border:none; border-top:var(--line-thin) solid rgba(255,255,255,0.1); margin:18px 0 22px; }

  .controls{ display:flex; align-items:center; gap:12px; color:var(--muted); flex-wrap:wrap; }
  .controls select, .controls input[type="range"], .controls input[type="number"], .controls button{
    background:#111; color:var(--fg); border:1px solid rgba(255,255,255,.12);
    padding:6px 8px; border-radius:10px; outline:none;
  }
  .controls select{ min-width:190px; color:var(--fg); appearance:none; }
  .controls select option{ background-color:#111; color:var(--fg); }
  .controls select:focus{
    box-shadow:0 0 calc(10px*var(--glow)) color-mix(in oklab, var(--accent) 40%, transparent);
    border-color:color-mix(in oklab, var(--accent) 40%, rgba(255,255,255,0.15));
  }
  .controls input[type="range"]{ width:180px; accent-color:var(--accent); }
  .controls input[type="number"]{ width:74px; text-align:center; }
  #currentTimeTop{ font-size:1.6rem; color:var(--accent); filter:drop-shadow(0 0 calc(6px*var(--glow)) var(--accent)); }

  .rail{
    position:relative; height:36px; border-radius:999px; overflow:hidden;
    background:
      linear-gradient(90deg,
        color-mix(in oklab, var(--accent2) 18%, transparent),
        color-mix(in oklab, var(--accent) 22%, transparent),
        color-mix(in oklab, var(--accent3) 18%, transparent)
      ),
      linear-gradient(90deg, var(--railA), var(--railB));
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.04),
                0 0 calc(14px*var(--glow)) color-mix(in oklab, var(--accent) 30%, transparent);
  }
  .workband{
    position:absolute; inset:0 auto 0 calc((8/24)*100%); width:calc((9/24)*100%);
    background:linear-gradient(180deg,
      color-mix(in oklab, var(--accent) 10%, transparent),
      color-mix(in oklab, var(--accent2) 10%, transparent));
    box-shadow:inset 0 0 0 1px rgba(255,255,255,0.03); pointer-events:none;
  }
  .ticks{ position:absolute; inset:0; display:grid; grid-template-columns:repeat(96, 1fr); pointer-events:none; }
  .ticks span{ width:1px; height:100%; background:linear-gradient(180deg, transparent, var(--tick), transparent); opacity:.9; }
  .ticks span:nth-child(4n){ background:linear-gradient(180deg, transparent, rgba(255,255,255,0.22), transparent); opacity:1; }

  .marker{
    position:absolute; top:-6px; bottom:-6px; width:2px; left:0; background:var(--marker);
    box-shadow:0 0 calc(10px*var(--glow)) var(--marker),
               0 0 calc(20px*var(--glow)) color-mix(in oklab, var(--marker) 60%, transparent);
  }
  .marker::after{
    content:""; position:absolute; left:50%; transform:translateX(-50%); top:-5px; width:9px; height:9px; border-radius:50%;
    background:radial-gradient(circle at 30% 30%, #fff, var(--marker) 45%, transparent 60%);
    box-shadow:0 0 calc(16px*var(--glow)) var(--marker);
  }

  .hour-labels{
    position:relative; margin:8px 2px 0; padding:0 2px; height:18px;
    color:var(--muted); font-size:.92rem; letter-spacing:.03em; text-transform:uppercase; --label-offset:0ch;
  }
  .hour-labels span{
    position:absolute; top:0; transform:translateX(calc(-50% + var(--label-offset))); min-width:2.4ch; text-align:center; white-space:nowrap; pointer-events:none;
  }
  .hour-labels span:last-child{ transform:translateX(calc(-100% + var(--label-offset))); text-align:right; }

  .stats{ display:flex; gap:18px; margin-top:12px; color:var(--muted); font-size:.95rem; flex-wrap:wrap; }
  .stats b{ color:var(--fg); }

  /* Collapsible Custom Theme (color pickers only) */
  details.theme {
    border:1px solid #111; border-radius:10px; background:#0a0a0a; box-shadow:0 0 0 1px #0f0f0f inset;
    margin:14px 0 10px; padding:8px 10px;
  }
  details.theme > summary{ cursor:pointer; list-style:none; color:var(--accent); font-weight:600; display:flex; align-items:center; gap:8px; }
  details.theme[open] > summary{ margin-bottom:10px; }
  .theme-grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(210px,1fr)); gap:10px; }
  .swatch{ display:flex; align-items:center; gap:8px; background:#0b0b0b; border:1px solid #222; padding:8px; border-radius:8px; }
  .swatch label{ min-width:90px; color:#aaa; }
  .swatch input[type="color"]{ background:#111; border:1px solid #222; border-radius:6px; padding:0; width:48px; height:34px; }

  .theme-actions{ display:flex; gap:8px; margin-top:10px; flex-wrap:wrap; }
  .theme-actions button{ background:#111; color:var(--fg); border:1px solid #222; padding:8px 10px; border-radius:6px; cursor:pointer; }

  .returnnav{text-align:center;margin:40px auto 0;}
  .returnnav a{ color:var(--accent); text-decoration:none; font-size:0.95rem; border:1px solid rgba(255,255,255,0.1); border-radius:10px; padding:6px 12px; transition:all .2s ease; }
  .returnnav a:hover{ background:rgba(255,255,255,0.04); border-color:var(--accent); text-shadow:0 0 6px var(--accent); }

  .foot{ margin-top:22px; color:var(--muted); font-size:.9rem; }
  .foot a{ color:var(--accent); text-decoration:none; }
</style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div class="brand">
        <a href="index.html">Linear Clock Lab</a>
        <small>Custom or Preset Color Themes</small>
      </div>
      <div class="controls" title="Choose theme & adjust glow">
        <label for="theme">Theme</label>
        <select id="theme">
          <option value="technolust">TechnoLust (Neon)</option>
          <option value="midnight">Midnight Blue</option>
          <option value="vaporwave">Vaporwave</option>
          <option value="terminal">Terminal Green</option>
          <option value="amber">Amber Retro</option>
          <option value="mono">Mono Minimal</option>
          <option value="solar">Solar-ish Dark</option>
          <option value="cybercrimson">CyberCrimson</option>
          <option value="aurorapulse">AuroraPulse</option>
          <option value="neonmist">NeonMist</option>
          <option value="deepcircuit">DeepCircuit</option>
          <option value="infravoid">InfraVoid</option>
          <option value="ghostline">Ghostline</option>
          <option value="ionstorm">IonStorm</option>
          <option value="zenmint">ZenMint</option>
          <option value="voidlux">VoidLux</option>
        </select>
        <label for="glow">Glow</label>
        <input id="glow" type="range" min="0" max="1.25" step="0.05" value="0.65" />
        <label for="labelOffset">Label offset</label>
        <input id="labelOffset" type="number" min="-1" max="3" step="0.05" value="0" />
        <button id="exportTheme" title="Export current custom theme">Export</button>
        <button id="importTheme" title="Import a custom theme JSON">Import</button>
        <input id="themeFile" type="file" accept="application/json" style="display:none">
      </div>
    </div>

    <!-- Collapsible: color pickers only -->
    <details class="theme" id="themePanel">
      <summary>üé® Custom Theme (click to toggle)</summary>
      <div class="theme-grid">
        <div class="swatch"><label for="bg">Background</label><input id="bg" type="color" value="#000000"></div>
        <div class="swatch"><label for="fg">Foreground</label><input id="fg" type="color" value="#bfc7d5"></div>
        <div class="swatch"><label for="muted">Muted</label><input id="muted" type="color" value="#7a8393"></div>

        <div class="swatch"><label for="accent">Accent</label><input id="accent" type="color" value="#00ffe6"></div>
        <div class="swatch"><label for="accent2">Accent 2</label><input id="accent2" type="color" value="#ff2bd6"></div>
        <div class="swatch"><label for="accent3">Accent 3</label><input id="accent3" type="color" value="#b4ff00"></div>

        <div class="swatch"><label for="marker">Marker</label><input id="marker" type="color" value="#00ffe6"></div>
        <div class="swatch"><label for="tick">Ticks</label><input id="tick" type="color" value="#1b1f28"></div>

        <div class="swatch"><label for="railA">Rail A</label><input id="railA" type="color" value="#0b0f15"></div>
        <div class="swatch"><label for="railB">Rail B</label><input id="railB" type="color" value="#121826"></div>
      </div>

      <div class="theme-actions">
        <button id="resetTheme" title="Restore preset defaults">Reset</button>
        <button id="collapseTheme" title="Collapse this panel">Collapse</button>
      </div>
    </details>

    <hr class="hairline" />

    <div id="currentTimeTop">--:--:--</div>

    <div class="rail" aria-label="24-hour time rail">
      <div class="workband" aria-hidden="true"></div>
      <div class="ticks" aria-hidden="true"></div>
      <div class="marker" role="presentation" aria-hidden="true"></div>
    </div>
    <div class="hour-labels" id="hourLabels"></div>

    <div class="stats" aria-live="polite">
      <div>Day elapsed: <b id="pctElapsed">--%</b></div>
      <div>Remaining: <b id="pctRemain">--%</b></div>
      <div>Time left: <b id="timeLeft">--:--:--</b></div>
    </div>

    <nav class="returnnav" aria-label="Return">
      <a href="index.html">‚Üê Back to Linear Clock Lab</a>
    </nav>

    <div class="foot"><span>¬© jm5k 2025</span></div>
  </div>

<script>
(() => {
  /* Build ticks */
  const ticksEl = document.querySelector('.ticks');
  for (let i=0;i<96;i++) ticksEl.appendChild(document.createElement('span'));

  /* Element refs */
  const marker        = document.querySelector('.marker');
  const nowTop        = document.getElementById('currentTimeTop');
  const timeLeft      = document.getElementById('timeLeft');
  const pctElapsed    = document.getElementById('pctElapsed');
  const pctRemain     = document.getElementById('pctRemain');
  const hourLabels    = document.getElementById('hourLabels');
  const labelOffsetIn = document.getElementById('labelOffset');
  const glow          = document.getElementById('glow');
  const themeSel      = document.getElementById('theme');
  const root          = document.documentElement;

  /* Keys */
  const THEME_KEY = 'clock_theme';
  const GLOW_KEY  = 'clock_glow';
  const LABEL_OFFSET_KEY = 'clock_label_offset';
  const CUSTOM_VARS_KEY = 'clock_custom_vars_v1';
  const UI_KEY    = 'clock_theme_ui_v1';

  const css   = (k,v)=> root.style.setProperty(k,v);
  const getVar= k => getComputedStyle(root).getPropertyValue(k).trim();
  const pad   = n => String(n).padStart(2,'0');
  const clamp = (n,min,max)=> Math.min(max, Math.max(min, n));

  const loadLabelOffset = () => {
    const raw = localStorage.getItem(LABEL_OFFSET_KEY);
    const n = raw !== null ? parseFloat(raw) : 0;
    return Number.isFinite(n) ? clamp(n, -3, 3) : 0;
  };
  const saveLabelOffset = v => { try { localStorage.setItem(LABEL_OFFSET_KEY, String(v)); } catch {} };
  const applyLabelOffset = v => { if (hourLabels) hourLabels.style.setProperty('--label-offset', `${v}ch`); };

  /* Hour labels (24h only) */
  const initialLabelOffset = loadLabelOffset();
  applyLabelOffset(initialLabelOffset);
  if (labelOffsetIn) labelOffsetIn.value = String(initialLabelOffset);

  if (hourLabels){
    for (let h=1; h<=24; h++){
      const label = document.createElement('span');
      label.textContent = pad(h);
      let frac = h/24;
      if (h < 24) frac = Math.max(0, frac - (1/48));
      label.style.left = (frac * 100).toFixed(6) + '%';
      hourLabels.appendChild(label);
    }
  }

  /* Update loop: DST-safe percentages + countdown to midnight */
  function update(){
    try{
      const d = new Date();

      // Local day bounds (handles 23/24/25h days)
      const startOfDay = new Date(d); startOfDay.setHours(0,0,0,0);
      const endOfDay   = new Date(d); endOfDay.setHours(24,0,0,0);

      const msInDay  = endOfDay - startOfDay;
      const msToday  = d - startOfDay;
      let   msRemain = endOfDay - d;
      if (msRemain < 0) msRemain = 0;

      const pct = msToday / msInDay;
      if (marker) marker.style.left = (pct*100).toFixed(6) + '%';

      // Top current time
      const hh = pad(d.getHours()), mm = pad(d.getMinutes()), ss = pad(d.getSeconds());
      if (nowTop) nowTop.textContent = `${hh}:${mm}:${ss}`;

      // Percentages
      const pe = pct*100;
      if (pctElapsed) pctElapsed.textContent = pe.toFixed(2) + '%';
      if (pctRemain)  pctRemain.textContent  = (100 - pe).toFixed(2) + '%';

      // Countdown to midnight
      const hLeft = Math.floor(msRemain / 3600000);
      const mLeft = Math.floor((msRemain % 3600000) / 60000);
      const sLeft = Math.floor((msRemain % 60000) / 1000);
      if (timeLeft) timeLeft.textContent = `${pad(hLeft)}:${pad(mLeft)}:${pad(sLeft)}`;
    } catch(e){
      console.error('Clock update error:', e);
    }
  }
  update();
  setInterval(update, 1000);

  /* Load persisted preset & glow */
  const savedTheme = localStorage.getItem(THEME_KEY);
  const savedGlow  = localStorage.getItem(GLOW_KEY);
  if (savedTheme) { root.setAttribute('data-theme', savedTheme); themeSel.value = savedTheme; }
  if (savedGlow)  { glow.value = savedGlow; css('--glow', savedGlow); }

  /* Color pickers <-> CSS vars */
  const fields = [
    ['bg','--bg'], ['fg','--fg'], ['muted','--muted'],
    ['accent','--accent'], ['accent2','--accent2'], ['accent3','--accent3'],
    ['marker','--marker'], ['tick','--tick'],
    ['railA','--railA'], ['railB','--railB']
  ];

  function loadCustomVars(){
    try { const raw = localStorage.getItem(CUSTOM_VARS_KEY); return raw ? JSON.parse(raw) : null; }
    catch { return null; }
  }
  function saveCustomVars(vars){
    try { localStorage.setItem(CUSTOM_VARS_KEY, JSON.stringify(vars)); } catch {}
  }
  function applyCustomVars(vars){
    Object.entries(vars).forEach(([k,v]) => css(k, v));
  }
  function seedPickersFromComputed(){
    for (const [id, cssVar] of fields){
      const el = document.getElementById(id);
      if (!el) continue;
      const current = getVar(cssVar) || el.value;
      if (/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(current)) el.value = current;
    }
  }

  // Bind live updates to color inputs
  for (const [id, cssVar] of fields){
    const el = document.getElementById(id);
    if (!el) continue;
    el.addEventListener('input', () => {
      css(cssVar, el.value);
      const vars = loadCustomVars() || {};
      vars[cssVar] = el.value;
      vars['--glow'] = String(glow.value); // keep glow with export
      saveCustomVars(vars);
    });
  }

  // Preset change
  themeSel.addEventListener('change', () => {
    const v = themeSel.value;
    root.setAttribute('data-theme', v);
    localStorage.setItem(THEME_KEY, v);

    // Clear custom color overrides so preset fully applies
    localStorage.removeItem(CUSTOM_VARS_KEY);
    const customFields = ['--bg','--fg','--muted','--accent','--accent2','--accent3','--tick','--railA','--railB','--marker'];
    for (const cssVar of customFields) root.style.setProperty(cssVar, null);

    // Reseed pickers from new preset
    seedPickersFromComputed();
  });

  // Glow slider
  glow.addEventListener('input', e => {
    css('--glow', e.target.value);
    localStorage.setItem(GLOW_KEY, e.target.value);
    const vars = loadCustomVars() || {};
    vars['--glow'] = String(e.target.value);
    saveCustomVars(vars);
  });

  // Label offset fine-tune
  if (labelOffsetIn){
    labelOffsetIn.addEventListener('input', () => {
      const raw = parseFloat(labelOffsetIn.value);
      const val = Number.isFinite(raw) ? clamp(raw, -3, 3) : 0;
      labelOffsetIn.value = String(val);
      applyLabelOffset(val);
      saveLabelOffset(val);
    });
  }

  // Collapsible state + reset
  const themePanel = document.getElementById('themePanel');
  const collapseThemeBtn = document.getElementById('collapseTheme');
  const resetThemeBtn = document.getElementById('resetTheme');

  function loadUI(){ try { const raw = localStorage.getItem(UI_KEY); return raw ? JSON.parse(raw) : { open:false }; } catch { return { open:false }; } }
  function saveUI(v){ try { localStorage.setItem(UI_KEY, JSON.stringify(v)); } catch {} }

  themePanel.addEventListener('toggle', () => { const u = loadUI(); u.open = themePanel.open; saveUI(u); });
  collapseThemeBtn.addEventListener('click', () => { themePanel.open = false; const u = loadUI(); u.open=false; saveUI(u); });

  resetThemeBtn.addEventListener('click', () => {
    localStorage.removeItem(CUSTOM_VARS_KEY);
    for (const [,cssVar] of fields) css(cssVar, null);
    const g = savedGlow || '0.65';
    glow.value = g; css('--glow', g); localStorage.setItem(GLOW_KEY, g);
    seedPickersFromComputed();
  });

  // Export / Import
  const exportBtn = document.getElementById('exportTheme');
  const importBtn = document.getElementById('importTheme');
  const themeFile = document.getElementById('themeFile');

  exportBtn.addEventListener('click', () => {
    const payload = {
      version: 1,
      exportedAt: new Date().toISOString(),
      preset: root.getAttribute('data-theme') || 'technolust',
      glow: parseFloat(glow.value || '0.65'),
      vars: loadCustomVars() || {}
    };
    const blob = new Blob([JSON.stringify(payload, null, 2)], { type:'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'clock-preset-theme.json';
    document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  });

  importBtn.addEventListener('click', () => themeFile.click());
  themeFile.addEventListener('change', async (e) => {
    const file = e.target.files && e.target.files[0]; if (!file) return;
    try{
      const text = await file.text();
      const data = JSON.parse(text);
      if (data.preset){ root.setAttribute('data-theme', data.preset); themeSel.value = data.preset; localStorage.setItem(THEME_KEY, data.preset); }
      if (typeof data.glow === 'number'){ glow.value = String(data.glow); css('--glow', String(data.glow)); localStorage.setItem(GLOW_KEY, String(data.glow)); }
      if (data.vars && typeof data.vars === 'object'){ applyCustomVars(data.vars); saveCustomVars(data.vars); } 
      else { localStorage.removeItem(CUSTOM_VARS_KEY); for (const [,cssVar] of fields) css(cssVar, null); }
      seedPickersFromComputed();
      const overlay = loadCustomVars(); if (overlay) applyCustomVars(overlay);
      alert('Theme imported.');
    } catch(err){ alert('Import failed: ' + err.message); }
    finally { themeFile.value = ''; }
  });

  /* Initial UI state + picker seeding + overlay */
  const ui = loadUI(); themePanel.open = !!ui.open;
  seedPickersFromComputed();
  const overlay = loadCustomVars(); if (overlay) applyCustomVars(overlay);
})();
</script>
</body>
</html>
